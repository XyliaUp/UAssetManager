<UserControl x:Class="UAssetManager.Controls.ColorPicker" 
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" mc:Ignorable="d" 
			 MouseEnter="OnMouseEnter" MouseLeave="OnMouseLeave">
	<Grid>
		<TextBox x:Name="PART_Text" Padding="4,2" Text="{Binding Text, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalContentAlignment="Center" 
				 PreviewMouseLeftButtonDown="Text_PreviewMouseLeftButtonDown" LostKeyboardFocus="Text_LostKeyboardFocus" >
			<TextBox.Background>
				<SolidColorBrush Color="{Binding Color,RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" />
			</TextBox.Background>
		</TextBox>
		<Popup x:Name="PART_Popup" Placement="Bottom" PlacementTarget="{Binding ElementName=PART_Text}" StaysOpen="True" AllowsTransparency="True" Opened="Popup_Opened" Closed="Popup_Closed">
			<Border x:Name="PART_PopupRoot" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" BorderBrush="#66000000" BorderThickness="1" CornerRadius="6" Padding="10" 
					MouseEnter="OnMouseEnter" MouseLeave="OnMouseLeave">
				<StackPanel Width="240">
					<Border Height="36" CornerRadius="4" BorderBrush="#66000000" BorderThickness="1" Margin="0,0,0,10">
						<Border.Background>
							<SolidColorBrush Color="{Binding Color, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" />
						</Border.Background>
					</Border>

					<DockPanel Margin="0,0,0,2">
						<TextBlock Text="R" />
						<TextBlock Text="{Binding R, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" Margin="6,0,0,0" />
					</DockPanel>
					<Slider Minimum="0" Maximum="255" Value="{Binding R, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Mode=TwoWay}" />

					<DockPanel Margin="0,8,0,2">
						<TextBlock Text="G" />
						<TextBlock Text="{Binding G, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" Margin="6,0,0,0" />
					</DockPanel>
					<Slider Minimum="0" Maximum="255" Value="{Binding G, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Mode=TwoWay}" />

					<DockPanel Margin="0,8,0,2">
						<TextBlock Text="B" />
						<TextBlock Text="{Binding B, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" Margin="6,0,0,0" />
					</DockPanel>
					<Slider Minimum="0" Maximum="255" Value="{Binding B, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Mode=TwoWay}" />

					<StackPanel Margin="0,8,0,0" Visibility="{Binding ShowAlpha, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Converter={StaticResource BooleanToVisibilityConverter}}">
						<DockPanel Margin="0,0,0,2">
							<TextBlock Text="A" />
							<TextBlock Text="{Binding A, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" Margin="6,0,0,0" />
						</DockPanel>
						<Slider Minimum="0" Maximum="255" Value="{Binding A, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Mode=TwoWay}" />
					</StackPanel>

					<DockPanel Margin="0,10,0,0">
						<TextBlock Text="Hex" VerticalAlignment="Center" Margin="0,0,8,0" />
						<TextBox Text="{Binding Html, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" IsReadOnly="True" />
					</DockPanel>
				</StackPanel>
			</Border>
		</Popup>
	</Grid>
</UserControl>