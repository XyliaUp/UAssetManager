<Window x:Class="UAssetManager.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="{DynamicResource Settings_Title}"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize" SizeToContent="WidthAndHeight"
        ShowInTaskbar="False">

	<Window.Resources>
		<Style TargetType="GroupBox">
			<Setter Property="Margin" Value="0,5"/>
			<Setter Property="Padding" Value="10"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="FontSize" Value="11"/>
		</Style>

		<Style TargetType="Button">
			<Setter Property="Margin" Value="5"/>
			<Setter Property="Height" Value="30"/>
			<Setter Property="MinWidth" Value="80"/>
		</Style>

		<Style TargetType="CheckBox">
			<Setter Property="Margin" Value="5,3"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
		</Style>

		<Style TargetType="ComboBox">
			<Setter Property="Margin" Value="5,3"/>
			<Setter Property="MinWidth" Value="200"/>
			<Setter Property="Height" Value="23"/>
		</Style>

		<Style TargetType="Label">
			<Setter Property="Margin" Value="5,3"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
			<Setter Property="MinWidth" Value="80"/>
		</Style>

		<Style TargetType="TextBox">
			<Setter Property="Margin" Value="5,3"/>
			<Setter Property="VerticalContentAlignment" Value="Center"/>
		</Style>

		<Style x:Key="ButtonPanelStyle" TargetType="Border">
			<Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
			<Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}"/>
			<Setter Property="BorderThickness" Value="0,1,0,0"/>
			<Setter Property="Padding" Value="10"/>
		</Style>
	</Window.Resources>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Main Content Area -->
		<ScrollViewer VerticalScrollBarVisibility="Auto" Margin="15,0">
			<StackPanel>
				<!-- Theme and Language Settings -->
				<GroupBox Header="{DynamicResource Settings_Theme}">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>

						<Label Grid.Row="0" Grid.Column="0" Content="{DynamicResource Settings_Theme}" />
						<ComboBox Grid.Row="0" Grid.Column="1" ItemsSource="{Binding Themes}" SelectedItem="{Binding Config.Theme}"/>

						<Label Grid.Row="1" Grid.Column="0" Content="{DynamicResource Settings_Language}" />
						<ComboBox Grid.Row="1" Grid.Column="1" ItemsSource="{Binding Languages}" SelectedItem="{Binding Config.Language}"/>
					</Grid>
				</GroupBox>

				<!-- Interface Settings -->
				<GroupBox Header="{DynamicResource Settings_Interface}">
					<UniformGrid Columns="2">
						<CheckBox Content="{DynamicResource Settings_ChangeValuesOnScroll}" IsChecked="{Binding Config.ChangeValuesOnScroll}"/>
						<CheckBox Content="{DynamicResource Settings_EnableDiscordRPC}" IsChecked="{Binding Config.EnableDiscordRPC}"/>
						<CheckBox Content="{DynamicResource Settings_DoubleClickToEdit}" IsChecked="{Binding Config.DoubleClickToEdit}"/>
						<CheckBox Content="{DynamicResource Settings_EnableBak}" IsChecked="{Binding Config.EnableBak}"/>
						<CheckBox Content="{DynamicResource Settings_EnableUpdateNotice}" IsChecked="{Binding Config.EnableUpdateNotice}"/>
						<CheckBox Content="{DynamicResource Settings_EnablePrettyBytecode}" IsChecked="{Binding Config.EnablePrettyBytecode}"/>
						<CheckBox Content="{DynamicResource Settings_EnableDynamicTree}" IsChecked="{Binding Config.EnableDynamicTree}"/>
						<CheckBox Content="{DynamicResource Settings_UseOuterIndexTreeMode}" IsChecked="{Binding Config.UseOuterIndexTreeMode}"/>
					</UniformGrid>
				</GroupBox>

				<!-- Data Settings -->
				<GroupBox Header="{DynamicResource Settings_CustomSerializationFlags}">
					<ListBox ItemsSource="{Binding CustomSerializationFlags}" SelectionMode="Multiple">
						<ListBox.ItemTemplate>
							<DataTemplate>
								<CheckBox Content="{Binding Name}" IsChecked="{Binding IsChecked}"/>
							</DataTemplate>
						</ListBox.ItemTemplate>
					</ListBox>
				</GroupBox>

				<!-- Other Settings -->
				<GroupBox Header="{DynamicResource Settings_Other}">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>

						<Label Grid.Row="0" Grid.Column="0" Content="{DynamicResource Settings_PreferredVersion}" />
						<ComboBox Grid.Row="0" Grid.Column="1" ItemsSource="{Binding EngineVersions}" SelectedItem="{Binding Config.PreferredVersion}"/>

						<Label Grid.Row="1" Grid.Column="0" Content="{DynamicResource Settings_PreferredCompressMethod}" />
						<ComboBox Grid.Row="1" Grid.Column="1" ItemsSource="{Binding CompressMethods}" SelectedItem="{Binding Config.PreferredCompressMethod}"/>

						<Label Grid.Row="2" Grid.Column="0" Content="{DynamicResource Settings_PreferredMappings}" />
						<TextBox Grid.Row="2" Grid.Column="1" Text="{Binding Config.PreferredMappings}"/>

						<Label Grid.Row="3" Grid.Column="0" Content="{DynamicResource Settings_AES}" />
						<TextBox Grid.Row="3" Grid.Column="1" Text="{Binding Config.AesKey}" FontSize="10" />
					</Grid>
				</GroupBox>
			</StackPanel>
		</ScrollViewer>

		<!-- Button Panel -->
		<Border Grid.Row="1" Style="{StaticResource ButtonPanelStyle}">
			<StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
				<Button Content="{DynamicResource Settings_About}" Click="About_Click"/>
				<Button Content="{DynamicResource Settings_Reset}" Command="{Binding ResetToDefaultsCommand}"/>
				<Button Content="{DynamicResource Text.OK}" Click="OK_Click" IsDefault="True"/>
				<Button Content="{DynamicResource Text.Cancel}" Click="Cancel_Click" IsCancel="True"/>
			</StackPanel>
		</Border>
	</Grid>
</Window>